---
title: 1. LC25000 - Colon and Lung Abnormalities
layout: page
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Prediction</title>
</head>
<body>
    <h1>Upload an Image for Prediction</h1>
    <input type="file" id="imageInput" accept="image/*">
    <button onclick="predict()">Predict</button>
    <div id="result"></div>

    <script>
        async function predict() {
            const imageInput = document.getElementById('imageInput');
            if (imageInput.files.length === 0) {
                alert('Please select an image file.');
                return;
            }

            const file = imageInput.files[0];
            const base64Image = await toBase64(file);

            const payload = {
                data: [base64Image]
            };

            const response = await fetch('https://bashaar-lc25000.hf.space/api/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });

            if (response.ok) {
                const responseData = await response.json();
                const prediction = responseData.data[0];
                const duration = responseData.duration;

                if (prediction) {
                    const label = prediction.label;
                    const confidences = prediction.confidences;
                    displayResult(label, confidences, duration);
                } else {
                    document.getElementById('result').innerText = 'No prediction returned.';
                }
            } else {
                document.getElementById('result').innerText = `Request failed with status code ${response.status}`;
            }
        }

        function toBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = error => reject(error);
            });
        }

        function displayResult(label, confidences, duration) {
            let resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `<p>Primary Label: ${label}</p>`;
            resultDiv.innerHTML += '<p>Confidences:</p><ul>';
            confidences.forEach(confidence => {
                resultDiv.innerHTML += `<li>${confidence.label}: ${confidence.confidence}</li>`;
            });
            resultDiv.innerHTML += `</ul><p>Duration: ${duration} seconds</p>`;
        }
    </script>
</body>
</html>
